# ğŸ“– é…ç½®ç³»ç»Ÿä½¿ç”¨æ¼”ç¤º

æœ¬æ–‡æ¡£é€šè¿‡å®é™…æ“ä½œæ¼”ç¤ºé…ç½®ç³»ç»Ÿçš„ä½¿ç”¨æ–¹æ³•ã€‚

## ğŸ¬ æ¼”ç¤º1ï¼šæŸ¥çœ‹å½“å‰é…ç½®

```bash
# æŸ¥çœ‹å½“å‰è¦æ„å»ºçš„åº”ç”¨
$ cat assets/build.app
app1

# æŸ¥çœ‹é…ç½®æ–‡ä»¶å†…å®¹
$ cat assets/app1/app.cfg
appName=æˆ‘çš„WebView
appDisplayName=MyWebView
appId=com.mywebviewapp
appVersion=1.0.0
buildNumber=1
loadUrl=https://www.baidu.com
loadingDuration=1000
loadingBackgroundColor=#4A90E2
...

# ä½¿ç”¨è„šæœ¬æŸ¥çœ‹é…ç½®
$ npm run config:check

ğŸ“± å½“å‰æ„å»ºåº”ç”¨: app1
âœ… é…ç½®åŠ è½½æˆåŠŸ: æˆ‘çš„WebView

ğŸ“‹ å½“å‰é…ç½®:
{
  "appName": "æˆ‘çš„WebView",
  "appDisplayName": "MyWebView",
  "appId": "com.mywebviewapp",
  "appVersion": "1.0.0",
  "buildNumber": "1",
  "buildAndroid": "true",
  "buildIOS": "true",
  "loadUrl": "https://www.baidu.com",
  "loadingDuration": "1000",
  "loadingBackgroundColor": "#4A90E2",
  ...
}
```

## ğŸ¬ æ¼”ç¤º2ï¼šåº”ç”¨é…ç½®

```bash
# åº”ç”¨å½“å‰é…ç½®åˆ°é¡¹ç›®
$ npm run build:config

ğŸš€ å¼€å§‹åº”ç”¨é…ç½®...

ğŸ“± å½“å‰æ„å»ºåº”ç”¨: app1
âœ… é…ç½®åŠ è½½æˆåŠŸ: æˆ‘çš„WebView

âœ… ç”Ÿæˆè¿è¡Œæ—¶é…ç½®æ–‡ä»¶: src/config/runtime.config.ts
âœ… æ›´æ–° app.json
âœ… æ›´æ–° Android build.gradle
âœ… æ›´æ–° Android strings.xml
âœ… æ›´æ–° iOS Info.plist
âœ… å¤åˆ¶ loading å›¾ç‰‡

âœ… é…ç½®åº”ç”¨å®Œæˆï¼
ğŸ“± åº”ç”¨åç§°: æˆ‘çš„WebView
ğŸŒ åŠ è½½URL: https://www.baidu.com
ğŸ“¦ ç‰ˆæœ¬: 1.0.0 (1)

# æŸ¥çœ‹ç”Ÿæˆçš„è¿è¡Œæ—¶é…ç½®
$ cat src/config/runtime.config.ts
export const AppConfig = {
  appName: 'æˆ‘çš„WebView',
  appDisplayName: 'MyWebView',
  appVersion: '1.0.0',
  buildNumber: 1,
  loadUrl: 'https://www.baidu.com',
  enableJavaScript: true,
  enableDOMStorage: true,
  enableCache: true,
  loadingDuration: 1000,
  loadingBackgroundColor: '#4A90E2',
  isDebug: false,
};
```

## ğŸ¬ æ¼”ç¤º3ï¼šåˆ‡æ¢åº”ç”¨é…ç½®

```bash
# æŸ¥çœ‹å½“å‰åº”ç”¨
$ cat assets/build.app
app1

# åˆ‡æ¢åˆ°app2
$ echo "app2" > assets/build.app

# åº”ç”¨æ–°é…ç½®
$ npm run build:config

ğŸš€ å¼€å§‹åº”ç”¨é…ç½®...

ğŸ“± å½“å‰æ„å»ºåº”ç”¨: app2
âœ… é…ç½®åŠ è½½æˆåŠŸ: å¦ä¸€ä¸ªWebViewåº”ç”¨

âœ… ç”Ÿæˆè¿è¡Œæ—¶é…ç½®æ–‡ä»¶: src/config/runtime.config.ts
âœ… æ›´æ–° app.json
âœ… æ›´æ–° Android build.gradle
âœ… æ›´æ–° Android strings.xml
âœ… æ›´æ–° iOS Info.plist
âœ… å¤åˆ¶ loading å›¾ç‰‡

âœ… é…ç½®åº”ç”¨å®Œæˆï¼
ğŸ“± åº”ç”¨åç§°: å¦ä¸€ä¸ªWebViewåº”ç”¨
ğŸŒ åŠ è½½URL: https://www.google.com
ğŸ“¦ ç‰ˆæœ¬: 2.0.0 (1)

# éªŒè¯é…ç½®å·²æ›´æ”¹
$ cat src/config/runtime.config.ts | grep -A 2 "loadUrl"
  loadUrl: 'https://www.google.com',
  enableJavaScript: true,
  enableDOMStorage: true,
```

## ğŸ¬ æ¼”ç¤º4ï¼šåˆ›å»ºæ–°åº”ç”¨é…ç½®

```bash
# æ­¥éª¤1ï¼šåˆ›å»ºé…ç½®ç›®å½•
$ mkdir -p assets/my-custom-app

# æ­¥éª¤2ï¼šåˆ›å»ºé…ç½®æ–‡ä»¶
$ cat > assets/my-custom-app/app.cfg << 'EOF'
appName=æˆ‘çš„è‡ªå®šä¹‰åº”ç”¨
appDisplayName=MyCustomApp
appId=com.example.customapp
appVersion=1.0.0
buildNumber=1
buildAndroid=true
buildIOS=true
isDebug=false
loadUrl=https://www.example.com
enableJavaScript=true
enableDOMStorage=true
enableCache=true
loadingDuration=1500
loadingBackgroundColor=#FF6B6B
EOF

# æ­¥éª¤3ï¼šæ·»åŠ èµ„æºæ–‡ä»¶ï¼ˆè¿™é‡Œå¤åˆ¶ç¤ºä¾‹å›¾ç‰‡ï¼‰
$ cp assets/app1/loading.png assets/my-custom-app/loading.png

# æ­¥éª¤4ï¼šæŒ‡å®šè¦æ„å»ºçš„åº”ç”¨
$ echo "my-custom-app" > assets/build.app

# æ­¥éª¤5ï¼šåº”ç”¨é…ç½®
$ npm run build:config

ğŸš€ å¼€å§‹åº”ç”¨é…ç½®...

ğŸ“± å½“å‰æ„å»ºåº”ç”¨: my-custom-app
âœ… é…ç½®åŠ è½½æˆåŠŸ: æˆ‘çš„è‡ªå®šä¹‰åº”ç”¨

âœ… ç”Ÿæˆè¿è¡Œæ—¶é…ç½®æ–‡ä»¶: src/config/runtime.config.ts
âœ… æ›´æ–° app.json
âœ… æ›´æ–° Android build.gradle
âœ… æ›´æ–° Android strings.xml
âœ… æ›´æ–° iOS Info.plist
âœ… å¤åˆ¶ loading å›¾ç‰‡

âœ… é…ç½®åº”ç”¨å®Œæˆï¼
ğŸ“± åº”ç”¨åç§°: æˆ‘çš„è‡ªå®šä¹‰åº”ç”¨
ğŸŒ åŠ è½½URL: https://www.example.com
ğŸ“¦ ç‰ˆæœ¬: 1.0.0 (1)

# æ­¥éª¤6ï¼šè¿è¡Œåº”ç”¨
$ npm run android
# æˆ–
$ npm run ios
```

## ğŸ¬ æ¼”ç¤º5ï¼šä¿®æ”¹ç°æœ‰é…ç½®

```bash
# åœºæ™¯ï¼šä¿®æ”¹app1çš„URLå’ŒLoadingæ—¶é•¿

# æ­¥éª¤1ï¼šç¼–è¾‘é…ç½®æ–‡ä»¶
$ vim assets/app1/app.cfg

# ä¿®æ”¹ä»¥ä¸‹å†…å®¹ï¼š
# loadUrl=https://www.github.com
# loadingDuration=2000
# loadingBackgroundColor=#000000

# æ­¥éª¤2ï¼šä¿å­˜å¹¶åº”ç”¨é…ç½®
$ echo "app1" > assets/build.app
$ npm run build:config

ğŸš€ å¼€å§‹åº”ç”¨é…ç½®...

ğŸ“± å½“å‰æ„å»ºåº”ç”¨: app1
âœ… é…ç½®åŠ è½½æˆåŠŸ: æˆ‘çš„WebView

âœ… é…ç½®åº”ç”¨å®Œæˆï¼
ğŸ“± åº”ç”¨åç§°: æˆ‘çš„WebView
ğŸŒ åŠ è½½URL: https://www.github.com
ğŸ“¦ ç‰ˆæœ¬: 1.0.0 (1)

# æ­¥éª¤3ï¼šéªŒè¯ä¿®æ”¹
$ cat src/config/runtime.config.ts | grep -E "(loadUrl|loadingDuration|loadingBackgroundColor)"
  loadUrl: 'https://www.github.com',
  loadingDuration: 2000,
  loadingBackgroundColor: '#000000',

# æ­¥éª¤4ï¼šè¿è¡ŒæŸ¥çœ‹æ•ˆæœ
$ npm run android
```

## ğŸ¬ æ¼”ç¤º6ï¼šå¯¹æ¯”ä¸åŒé…ç½®

```bash
# æŸ¥çœ‹app1å’Œapp2çš„é…ç½®å·®å¼‚
$ diff assets/app1/app.cfg assets/app2/app.cfg

4c4
< appName=æˆ‘çš„WebView
---
> appName=å¦ä¸€ä¸ªWebViewåº”ç”¨
6c6
< appDisplayName=MyWebView
---
> appDisplayName=AnotherWebView
8c8
< appId=com.mywebviewapp
---
> appId=com.anotherwebview
10,11c10,11
< appVersion=1.0.0
< buildNumber=1
---
> appVersion=2.0.0
> buildNumber=1
18c18
< loadUrl=https://www.baidu.com
---
> loadUrl=https://www.google.com
24,25c24,25
< loadingDuration=1000
< loadingBackgroundColor=#4A90E2
---
> loadingDuration=2000
> loadingBackgroundColor=#FF6B6B
```

## ğŸ¬ æ¼”ç¤º7ï¼šæ‰¹é‡æŸ¥çœ‹æ‰€æœ‰åº”ç”¨é…ç½®

```bash
# åˆ—å‡ºæ‰€æœ‰åº”ç”¨
$ ls -d assets/app*/ assets/my-*/
assets/app1/
assets/app2/
assets/my-custom-app/

# æŸ¥çœ‹æ¯ä¸ªåº”ç”¨çš„åŸºæœ¬ä¿¡æ¯
$ for app in app1 app2 my-custom-app; do
    echo "=== $app ==="
    grep -E "^(appName|loadUrl|loadingBackgroundColor)" assets/$app/app.cfg
    echo ""
done

=== app1 ===
appName=æˆ‘çš„WebView
loadUrl=https://www.baidu.com
loadingBackgroundColor=#4A90E2

=== app2 ===
appName=å¦ä¸€ä¸ªWebViewåº”ç”¨
loadUrl=https://www.google.com
loadingBackgroundColor=#FF6B6B

=== my-custom-app ===
appName=æˆ‘çš„è‡ªå®šä¹‰åº”ç”¨
loadUrl=https://www.example.com
loadingBackgroundColor=#FF6B6B
```

## ğŸ¬ æ¼”ç¤º8ï¼šè¿è¡Œä¸åŒçš„åº”ç”¨

```bash
# åœºæ™¯1ï¼šè¿è¡Œapp1ï¼ˆç™¾åº¦ï¼‰
$ echo "app1" > assets/build.app
$ npm run android
# åº”ç”¨ä¼šåŠ è½½ https://www.baidu.com

# åœºæ™¯2ï¼šè¿è¡Œapp2ï¼ˆè°·æ­Œï¼‰
$ echo "app2" > assets/build.app
$ npm run android
# åº”ç”¨ä¼šåŠ è½½ https://www.google.com

# åœºæ™¯3ï¼šè¿è¡Œè‡ªå®šä¹‰åº”ç”¨
$ echo "my-custom-app" > assets/build.app
$ npm run android
# åº”ç”¨ä¼šåŠ è½½ https://www.example.com
```

## ğŸ¬ æ¼”ç¤º9ï¼šæ„å»ºReleaseç‰ˆæœ¬

```bash
# åœºæ™¯ï¼šä¸ºapp1æ„å»ºAndroid APK

# æ­¥éª¤1ï¼šæŒ‡å®šåº”ç”¨
$ echo "app1" > assets/build.app

# æ­¥éª¤2ï¼šåº”ç”¨é…ç½®
$ npm run build:config

# æ­¥éª¤3ï¼šæ„å»ºAPK
$ cd android
$ ./gradlew assembleRelease
$ cd ..

# æ­¥éª¤4ï¼šæŸ¥çœ‹ç”Ÿæˆçš„APK
$ ls -lh android/app/build/outputs/apk/release/
total 50M
-rw-r--r-- 1 ubuntu ubuntu 50M Dec  9 11:30 app-release.apk

# APKåŒ…å«çš„æ˜¯app1çš„é…ç½®ï¼ˆç™¾åº¦ï¼‰
```

## ğŸ¬ æ¼”ç¤º10ï¼šCI/CDè‡ªåŠ¨æ„å»º

```bash
# åœºæ™¯ï¼šé€šè¿‡Gitæ¨é€è§¦å‘è‡ªåŠ¨æ„å»º

# æ­¥éª¤1ï¼šä¿®æ”¹build.appæŒ‡å®šè¦æ„å»ºçš„åº”ç”¨
$ echo "app1" > assets/build.app

# æ­¥éª¤2ï¼šæäº¤å¹¶æ¨é€
$ git add assets/build.app
$ git commit -m "Build app1"
$ git push origin main

# GitHub Actionsä¼šè‡ªåŠ¨ï¼š
# 1. è¯»å– assets/build.app
# 2. åº”ç”¨ app1 é…ç½®
# 3. æ„å»º Android APK å’Œ AAB
# 4. æ„å»º iOS IPA
# 5. ä¸Šä¼ æ„å»ºäº§ç‰©

# å¦‚æœæ¨é€tagï¼Œè¿˜ä¼šåˆ›å»ºRelease
$ git tag v1.0.0
$ git push origin v1.0.0
```

## ğŸ¬ æ¼”ç¤º11ï¼šæ•…éšœæ’é™¤

```bash
# åœºæ™¯ï¼šé…ç½®æœªç”Ÿæ•ˆ

# é—®é¢˜ï¼šä¿®æ”¹äº†é…ç½®ä½†æ²¡æœ‰ç”Ÿæ•ˆ

# è§£å†³æ–¹æ³•1ï¼šé‡æ–°åº”ç”¨é…ç½®
$ npm run build:config

# è§£å†³æ–¹æ³•2ï¼šæ¸…ç†ç¼“å­˜
$ npm start -- --reset-cache

# è§£å†³æ–¹æ³•3ï¼šæ¸…ç†æ„å»º
$ cd android && ./gradlew clean && cd ..
$ rm -rf ios/build

# è§£å†³æ–¹æ³•4ï¼šé‡æ–°å®‰è£…ä¾èµ–
$ rm -rf node_modules
$ npm install

# è§£å†³æ–¹æ³•5ï¼šæŸ¥çœ‹ç”Ÿæˆçš„é…ç½®æ–‡ä»¶
$ cat src/config/runtime.config.ts
```

## ğŸ¬ æ¼”ç¤º12ï¼šç¯å¢ƒå˜é‡ï¼ˆé«˜çº§ï¼‰

```bash
# åœºæ™¯ï¼šä»å‘½ä»¤è¡ŒæŒ‡å®šåº”ç”¨åç§°

# æ–¹æ³•1ï¼šä¿®æ”¹è„šæœ¬æ”¯æŒç¯å¢ƒå˜é‡
# åœ¨ scripts/read-config.js ä¸­æ·»åŠ ï¼š
# const appName = process.env.BUILD_APP || getCurrentAppName();

# ä½¿ç”¨ï¼š
$ BUILD_APP=app2 npm run build:config

# æ–¹æ³•2ï¼šä½¿ç”¨è„šæœ¬åŒ…è£…
$ cat > build-app.sh << 'EOF'
#!/bin/bash
echo "$1" > assets/build.app
npm run build:config
npm run android
EOF

$ chmod +x build-app.sh
$ ./build-app.sh app1
$ ./build-app.sh app2
```

## ğŸ“Š æ¼”ç¤ºæ€»ç»“

### åŸºæœ¬æ“ä½œ
1. âœ… æŸ¥çœ‹é…ç½®ï¼š`npm run config:check`
2. âœ… åº”ç”¨é…ç½®ï¼š`npm run build:config`
3. âœ… åˆ‡æ¢åº”ç”¨ï¼š`echo "appname" > assets/build.app`
4. âœ… è¿è¡Œåº”ç”¨ï¼š`npm run android` æˆ– `npm run ios`

### é«˜çº§æ“ä½œ
1. âœ… åˆ›å»ºæ–°åº”ç”¨é…ç½®
2. âœ… ä¿®æ”¹ç°æœ‰é…ç½®
3. âœ… å¯¹æ¯”é…ç½®å·®å¼‚
4. âœ… æ‰¹é‡æ„å»º
5. âœ… CI/CDé›†æˆ

### å…³é”®å‘½ä»¤

```bash
# æœ€å¸¸ç”¨çš„ä¸‰ä¸ªå‘½ä»¤
npm run config:check     # æŸ¥çœ‹é…ç½®
npm run build:config     # åº”ç”¨é…ç½®
npm run android          # è¿è¡Œåº”ç”¨ï¼ˆè‡ªåŠ¨åº”ç”¨é…ç½®ï¼‰

# åˆ‡æ¢åº”ç”¨
echo "app2" > assets/build.app && npm run android

# åˆ›å»ºæ–°åº”ç”¨
mkdir -p assets/new-app
cp assets/app1/app.cfg assets/new-app/
vim assets/new-app/app.cfg
echo "new-app" > assets/build.app
npm run android
```

## ğŸ’¡ ä½¿ç”¨æŠ€å·§

### æŠ€å·§1ï¼šå¿«é€Ÿåˆ‡æ¢
```bash
# åˆ›å»ºåˆ«å
alias build-app1='echo "app1" > assets/build.app && npm run android'
alias build-app2='echo "app2" > assets/build.app && npm run android'

# ä½¿ç”¨
build-app1
build-app2
```

### æŠ€å·§2ï¼šé…ç½®å¤‡ä»½
```bash
# å¤‡ä»½å½“å‰é…ç½®
cp assets/build.app assets/build.app.backup
cp -r assets/app1 assets/app1.backup

# æ¢å¤é…ç½®
cp assets/build.app.backup assets/build.app
```

### æŠ€å·§3ï¼šé…ç½®ç‰ˆæœ¬ç®¡ç†
```bash
# ä¸ºä¸åŒé…ç½®åˆ›å»ºåˆ†æ”¯
git checkout -b config/app1
echo "app1" > assets/build.app
git add . && git commit -m "App1 config"

git checkout -b config/app2
echo "app2" > assets/build.app
git add . && git commit -m "App2 config"
```

---

**æ¼”ç¤ºå®Œæˆï¼** ğŸ‰

é€šè¿‡è¿™äº›æ¼”ç¤ºï¼Œæ‚¨åº”è¯¥å·²ç»æŒæ¡äº†é…ç½®ç³»ç»Ÿçš„ä½¿ç”¨æ–¹æ³•ã€‚

æ›´å¤šä¿¡æ¯è¯·æŸ¥çœ‹ï¼š
- [QUICKSTART.md](./QUICKSTART.md) - å¿«é€Ÿå…¥é—¨
- [é…ç½®æ–‡ä»¶è¯´æ˜.md](./é…ç½®æ–‡ä»¶è¯´æ˜.md) - è¯¦ç»†è¯´æ˜
- [å¤šåº”ç”¨é…ç½®ä½¿ç”¨æŒ‡å—.md](./å¤šåº”ç”¨é…ç½®ä½¿ç”¨æŒ‡å—.md) - ä½¿ç”¨æŒ‡å—
